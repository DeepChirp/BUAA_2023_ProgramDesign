# 均匀量化编码

时间限制：1000 ms / 空间限制：65536 KB / 难度：1

## 题目背景

这天吹奏乐部的部长黄九妹想要把自己得到全国大会金赏的演奏录制出来留作纪念。但是我们都知道，声音的本质是一个模拟信号，它在时间上和幅度上都是连续的，而存储器中只能存储`0`和`1`，这中间的转化过程是怎样的呢？这就需要用到模拟信号数字化技术。一般来说，就是采样、量化、编码三步。

其中**采样**就是把时间上连续的模拟信号变成一系列时间上离散的采样值的过程。经过采样后的信号称为采样信号，采样信号在某一时间点的取值称为**样值**。在采样以后，虽然时间上信号变成了离散的，但是样值仍然可能会有非常多种的取值，所以直接数字化效率较低。

为了进行数字化，需要对采样信号进行进一步的**量化**处理。量化器把样值的取值范围分为有限个不重叠的子区间，每个子区间用该区间内一个确定数值表示，落入其内的样值将以该值输出，从而将采样信号变为具有有限个离散值电平的近似信号。这些子区间叫做**量化区间**，这个子区间内的确定数值叫做量化区间对应的**量化值**。

最终，给这些=有限个数值赋予一个一一对应的`01`二进制串作为其**编码**。这就是模拟信号数字化的全过程。

下图为对一个连续信号（左上）进行采样（右上）、量化（左下）和编码（右下）的过程。

![模拟信号数字化](https://akizukipic.oss-cn-beijing.aliyuncs.com/img/202304121656595.jpg)

## 题目描述

黄九妹已经成功把声信号转换为电压信号，并完成了采样的过程。现在，想让你帮她实现量化和编码的过程，今天需要实现的是比较简单的均匀量化。

把输入信号的取值范围按等间隔分割的量化称为均匀量化。在均匀量化中，每个量化区间的量化值在各区间的中点。如果**量化范围**为 $[-V,V)$，量化层数为$L$，那么均匀量化如下图所示：

 ![均匀量化示意图](https://akizukipic.oss-cn-beijing.aliyuncs.com/img/202310112336473.png)

其中的区间$[x_i,x_{i+1})$是量化区间，$y_i=\dfrac{x_i+x_{i+1}}{2}$ 是这个量化区间对应的量化值，$i$ 是量化区间的级数，量化区间 $[x_i,x_{i+1})$ 也称为第 $i$ 量化级。在均匀量化时，把所有处在第 $i$ 量化级的样值都量化为 $y_i$。当样值超出量化范围时，量化器发生过载，应将它量化到离它最近的量化级上。

在编码时，工程上一般采取折叠码对量化级数编码。每个码的长度（位数）称为**量化比特数**。显而易见的，如果量化比特数为 $N$ ，那么量化层数为 $L=2^N$ 。$N$ 位折叠码的最高位叫极性码：`1` 表示非负，`0` 表示负；后面的 $N-1$ 位表示绝对幅度大小。对于非负样值，与量化级数的二进制表示的后 $N-1$ 位相同；对于负样值，是量化级数的二进制表示后$N-1$位的取反值。

现在输入一些实数，表示需要数字化的电压样值，请你完成模拟信号的数字化。

## 输入格式

第一行两个正整数$V,N$，表示量化范围是 $[-V,V)$、量化比特数是 $N$ 。满足 $1\leq V\leq 10,2\leq N\leq 16$

接下来若干行，每行一个实数，小数点后不超过 $6$ 位，表示待数字化的电压样值，请用 `double` 类型读入。

## 输出格式

对于每个输入电压样值，输出一行。每行输出一个 $N$ 位二进制码，表示数字化结果。

## 输入样例

    1 4
    -0.840256
    0.322865
    0.445563
    -0.882238
    -0.788582
    -0.604354
    -0.749393
    0.962649
    1.231145
    -1.781556

## 输出样例

    0110
    1010
    1011
    0111
    0110
    0100
    0101
    1111
    1111
    0111

## 样例解释

| 序号 | 输入电压样值  | 量化级数                                 | 编码结果 |
| ---- | --------- | :--------------------------------------- | -------- |
| 1    | -0.84026  | 第 $1$ 量化级：$[-0.875,-0.750)$          | 0110     |
| 2    | 0.322865  | 第 $10$ 量化级：$[0.250,0.375)$          | 1010     |
| 3    | 0.445563  | 第 $11$ 量化级：$[0.375,0.500)$          | 1011     |
| 4    | -0.88224  | 第 $0$ 量化级：$[-1.000,-0.875)$         | 0111     |
| 5    | -0.78858  | 第 $1$ 量化级：$[-0.875,-0.750)$         | 0110     |
| 6    | -0.60435  | 第 $3$ 量化级：$[-0.625,-0.500)$         | 0100     |
| 7    | -0.74939  | 第 $2$ 量化级：$[-0.750,-0.625)$         | 0101     |
| 8    | 0.962649  | 第 $15$ 量化级：$[0.875,1.000)$          | 1111     |
| 9    | 1.231145  | （过载）第 $15$ 量化级：$[0.875,1.000)$  | 1111     |
| 10   | -1.781556 | （过载）第 $0$ 量化级：$[-1.000,-0.875)$ | 0111     |

在 $[-1,1)$ 量化范围上采取 $4$ 位编码，那么量化层数为$L=2^4=16$，第 $0\sim7$ 量化级对应样值 $[-1,0)$，属于负样值；$8\sim 15$ 量化级对应样值 $[0,1)$，属于正样值。接下来详细说明第 $3$ 个数据和第 $7$ 个数据的编码过程。

在第 $3$ 个数据中，输入电压样值处于第 $11$ 量化级内。 第 $11$ 级处于正样值范围，极性码为`1`，又因为 $(11)_{10}=(1011)_2$ ，后面三位是 $11$ 的自然二进制码的后三位`011`，故第 $11$ 量化级的编码为`1011`。

在第 $7$ 个数据中，输入电压样值处于第 $2$ 量化级内。第 $2$ 级处于负样值范围，极性码为`0`，又因为 $(2)_{10}=(010)_{2}$，后面三位是 $2$ 的自然二进制码取反`101`，故第 $2$ 量化级的编码为`0101`。

原创：梁秋月
